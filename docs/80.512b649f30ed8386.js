"use strict";(self.webpackChunkE_commerceApp=self.webpackChunkE_commerceApp||[]).push([[80],{5080:(m,h,e)=>{e.r(h),e.d(h,{WishlistComponent:()=>T});var t=e(4769),a=e(6814),u=e(1120),d=e(205),n=e(9196),g=e(6286),r=e(2425);function l(o,p){if(1&o){const s=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,_=t.oxw();return t.KtG(_.addWishlist(c._id))}),t.qZA()}}function v(o,p){if(1&o){const s=t.EpF();t.TgZ(0,"i",20),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,_=t.oxw();return t.KtG(_.removeFav(c._id))}),t.qZA()}}function f(o,p){if(1&o&&t._UZ(0,"i",21),2&o){const s=p.$implicit,i=t.oxw().$implicit;t.ekj("rating-color",i.ratingsAverage>=s)}}const C=function(o){return["/productDetails",o]},x=function(){return[1,2,3,4,5]};function E(o,p){if(1&o){const s=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t.YNc(2,l,1,0,"i",7),t.YNc(3,v,1,0,"i",8),t.TgZ(4,"header",9),t._UZ(5,"img",10),t.TgZ(6,"h3",11),t._uU(7),t.ALo(8,"textcut"),t.qZA(),t.TgZ(9,"h4",12),t._uU(10),t.qZA(),t.TgZ(11,"div",13)(12,"span"),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"div",14),t.YNc(16,f,1,2,"i",15),t.TgZ(17,"span"),t._uU(18),t.qZA()()()(),t.TgZ(19,"footer")(20,"button",16,17),t.NdJ("click",function(){const _=t.CHM(s).$implicit,W=t.MAs(21),A=t.oxw();return t.KtG(A.addToCartt(_._id,W))}),t._uU(22," Add To Cart "),t._UZ(23,"i",18),t.qZA()()()()}if(2&o){const s=p.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",!i.wishListData.includes(s._id)),t.xp6(1),t.Q6J("ngIf",i.wishListData.includes(s._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(17,C,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title)("title",s.title),t.xp6(2),t.Oqu(t.xi3(8,11,s.title,3)),t.xp6(3),t.Oqu(s.category.name),t.xp6(3),t.Oqu(t.xi3(14,14,s.price,"e\xa3 ")),t.xp6(3),t.Q6J("ngForOf",t.DdM(19,x)),t.xp6(2),t.Oqu(s.ratingsAverage)}}let T=(()=>{class o{constructor(s,i,c,_){this._WishlistService=s,this._Renderer2=i,this._CartService=c,this.toastr=_,this.wishListData=[],this.Prouducts=[]}ngOnInit(){this._WishlistService.gitWishList().subscribe({next:s=>{console.log(s),this.Prouducts=s.data;const i=s.data.map(c=>c._id);this.wishListData=i},error:s=>{console.log(s)}})}addToCartt(s,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.addToCart(s).subscribe({next:c=>{this.toastr.success(c.message),this._Renderer2.removeAttribute(i,"disabled"),this._CartService.carNumber.next(c.numOfCartItems)},error:c=>{this._Renderer2.removeAttribute(i,"disabled")}})}addWishlist(s){this._WishlistService.addProductToWishList(s).subscribe({next:i=>{this.toastr.success(i.message),this.wishListData=i.data,this._WishlistService.wishlistNumber.next(this.wishListData.length)},error:i=>{this.toastr.success(i.message)}})}removeFav(s){this._WishlistService.removeItemFromWishList(s).subscribe({next:i=>{this.toastr.success(i.message),this.Prouducts=i.data,this._WishlistService.wishlistNumber.next(this.Prouducts.length),console.log(i),this._WishlistService.gitWishList().subscribe({next:c=>{this.Prouducts=c.data}})},error:i=>{console.log(i)}})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(n.M),t.Y36(t.Qsj),t.Y36(g.N),t.Y36(r._W))};static#s=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:7,vars:5,consts:[[1,"main-slide"],[1,"text-center","mb-3","p-4","bg-light"],[1,"text-info"],[1,"row","g-4","py-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2 ",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","row-custom","border","position-relative"],["role","button","class","fa-regular fa-heart hheart ",3,"click",4,"ngIf"],["role","button","class","fa-solid fa-heart hheartRemove",3,"click",4,"ngIf"],["role","button",3,"routerLink"],[1,"w-100","h-75",3,"src","alt","title"],[1,"h4","text-center","small","mt-1"],[1,"h6","text-muted","text-center"],[1,"d-flex","align-items-center","justify-content-between","px-4"],[1,"text-muted"],["class","  fas fa-star",3,"rating-color",4,"ngFor","ngForOf"],[1,"btn","btn-info","text-light","fs-5","w-100","py-2","mt-1",3,"click"],["addButton",""],[1,"fa-solid","fa-cart-shopping"],["role","button",1,"fa-regular","fa-heart","hheart",3,"click"],["role","button",1,"fa-solid","fa-heart","hheartRemove",3,"click"],[1,"fas","fa-star"]],template:function(i,c){1&i&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h3",2),t._uU(3,"WISH LIST"),t.qZA()(),t.TgZ(4,"div",3),t.YNc(5,E,24,20,"div",4),t.ALo(6,"slice"),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("ngForOf",t.Dn7(6,1,c.Prouducts,0,100)))},dependencies:[a.ez,a.sg,a.O5,a.OU,a.H9,u.rH,d.D]})}return o})()},6286:(m,h,e)=>{e.d(h,{N:()=>d});var t=e(5619),a=e(4769),u=e(9862);let d=(()=>{class n{constructor(r){this._HttpClient=r,this.carNumber=new t.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addToCart(r){return this._HttpClient.post(this.baseUrl+"cart",{productId:r})}getUserCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(r){return this._HttpClient.delete(this.baseUrl+`cart/${r}`)}updateCartItem(r,l){return this._HttpClient.put(this.baseUrl+`cart/${l}`,{count:r})}ClearAll(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(r,l){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${r}?url=https://github.com/AbdullahGmalAbdo/E-commerceProject`,{shippingAddress:l})}static#t=this.\u0275fac=function(l){return new(l||n)(a.LFG(u.eN))};static#s=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},9196:(m,h,e)=>{e.d(h,{M:()=>d});var t=e(5619),a=e(4769),u=e(9862);let d=(()=>{class n{constructor(r){this._HttpClient=r,this.wishlistNumber=new t.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addProductToWishList(r){return this._HttpClient.post(this.baseUrl+"wishlist",{productId:r})}gitWishList(){return this._HttpClient.get(this.baseUrl+"wishlist")}removeItemFromWishList(r){return this._HttpClient.delete(this.baseUrl+`wishlist/${r}`)}static#t=this.\u0275fac=function(l){return new(l||n)(a.LFG(u.eN))};static#s=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);